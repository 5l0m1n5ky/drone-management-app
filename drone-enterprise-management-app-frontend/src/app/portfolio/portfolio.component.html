<main [ngClass]="onShow || isCreateMode ? 'w-screen h-screen overflow-hidden' : 'w-screen h-screen overflow-x-hidden'">
  <app-navbar></app-navbar>
  <section class="relative h-screen w-full bg-neutral-950 overflow-y-hidden select-none">

    <!-- create overlay -->
    <div *ngIf="isCreateMode"
      class="absolute flex flex-col justify-center items-center z-50 top-0 left-0 h-screen w-screen overflow-hidden">
      <div
        class="w-[80%] h-[80%] bg-neutral-900/90 ring-1 ring-neutral-800 rounded-2xl flex flex-col justify-between items-center">
        <div class="w-full h-auto mt-10 px-10">
          <p-stepper [linear]="true" class="w-[90%] h-full">
            <form [formGroup]="createPostForm"></form>
            <p-stepperPanel>
              <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
                <img src="./assets/icons/attach-file-icon.svg"
                  class="h-[40px] w-[40px] rounded-full ring-1 ring-neutral-500 p-1">
              </ng-template>
              <ng-template pTemplate="content" let-nextCallback="nextCallback">
                <div>
                  <p>Wybierz plik</p>
                  <p-fileUpload name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php" [multiple]="false"
                    accept="image/*" maxFileSize="5000000" auto="true">
                    <ng-template pTemplate="content">
                      <!-- <ul *ngIf="uploadedFiles.length">
                        <li *ngFor="let file of uploadedFiles">
                          {{ file.name }} - {{ file.size }} bytes
                        </li>
                      </ul> -->
                    </ng-template>
                  </p-fileUpload>
                </div>
                <div class="flex pt-4 justify-content-end">
                  <p-button (onClick)="nextCallback.emit()" label="Next" icon="pi pi-arrow-right" iconPos="right" />
                </div>
              </ng-template>
            </p-stepperPanel>
            <p-stepperPanel>
              <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
                <img src="./assets/icons/location-icon.svg"
                  class="h-[40px] w-[40px] rounded-full ring-1 ring-neutral-500 p-1">
              </ng-template>
              <ng-template pTemplate="content" let-nextCallback="nextCallback" let-prevCallback="prevCallback">
                <div>
                  location
                </div>
                <div class="flex pt-4 justify-content-end">
                  <p-button (onClick)="nextCallback.emit()" label="Next" icon="pi pi-arrow-right" iconPos="right" />
                  <p-button label="Back" icon="pi pi-arrow-left" (onClick)="prevCallback.emit()" />
                </div>
              </ng-template>
            </p-stepperPanel>
            <p-stepperPanel>
              <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
                <img src="./assets/icons/note-icon.svg"
                  class="h-[40px] w-[40px] rounded-full ring-1 ring-neutral-500 p-1">
              </ng-template>
              <ng-template pTemplate="content" let-nextCallback="nextCallback" let-prevCallback="prevCallback">
                <div>
                  description
                </div>
                <div class="flex pt-4 justify-content-end">
                  <p-button (onClick)="nextCallback.emit()" label="Next" icon="pi pi-arrow-right" iconPos="right" />
                  <p-button label="Back" icon="pi pi-arrow-left" (onClick)="prevCallback.emit()" />
                </div>
              </ng-template>
            </p-stepperPanel>
            <p-stepperPanel>
              <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
                <img src="./assets/icons/visibility_icon.png"
                  class="h-[40px] w-[40px] rounded-full ring-1 ring-neutral-500 p-1">
              </ng-template>
              <ng-template pTemplate="content" let-nextCallback="nextCallback" let-prevCallback="prevCallback">
                <div>
                  visibility
                </div>
                <div class="flex pt-4 justify-content-end">
                  <p-button (onClick)="nextCallback.emit()" label="Next" icon="pi pi-arrow-right" iconPos="right" />
                  <p-button label="Back" icon="pi pi-arrow-left" (onClick)="prevCallback.emit()" />
                </div>
              </ng-template>
            </p-stepperPanel>
          </p-stepper>
        </div>
        <div class="w-full h-auto flex flex-row justify-center items-center my-5">
          <p (click)="onCancelCreateMode()"
            class="w-[40%] py-2 mx-2 ring-1 ring-neutral-600 font-montserrat font-normal text-base text-neutral-600 rounded-lg text-center cursor-pointer hover:ring-neutral-500 hover:text-neutral-500 transition-all ease-in-out duration-150">
            ANULUJ
          </p>
          <p
            class="w-[40%] py-2 mx-2 font-montserrat font-normal text-base bg-neutral-600 text-neutral-950 rounded-lg text-center cursor-pointer hover:bg-neutral-500 transition-all ease-in-out duration-150">
            <!-- <p class="w-[40%] py-2 mx-2 font-montserrat font-normal text-base bg-neutral-800 text-neutral-950 rounded-lg text-center cursor-not-allowed transition-all ease-in-out duration-150"> -->
            DODAJ
          </p>
        </div>
      </div>
    </div>

    <!-- default device -->
    <div *ngIf="!isMobile && onShow"
      class="absolute flex flex-row justify-around items-center z-50 top-0 left-0 h-screen w-screen backdrop-blur-sm overflow-hidden">
      <div
        class="relative w-20 h-20 mr-5 hover:scale-110 hover:brightness-150 cursor-pointer transition-all ease-in-out duration-75">
        <img src="./assets/icons/swipe-left.svg" alt="swipe-left" class="h-full w-full" (click)="onSwipeLeft()"
          [style]="swipeLeftDisabled ? 'visibility: hidden' : 'visibility: visible'">
      </div>
      <img src="./assets/icons/cancel-icon.png" alt="cancel-icon" (click)="onGalleryItemClose()"
        class="absolute right-5 top-5 w-8 h-8 brightness-50 cursor-pointer hover:brightness-100 transition-all ease-in-out duration-75">
      <div class="flex flex-row justify-center items-center max-w-[90%] h-[90%]">
        <div class="flex flex-row justify-center items-center bg-neutral-900 h-full max-w-[75%] rounded-l-xl">
          <img src="{{currentPost.path}}" alt="gallery-item" class="w-full h-full object-contain rounded-l-xl">
        </div>
        <div class="bg-neutral-900 h-full max-w-[25%] flex-grow rounded-r-xl flex-col items-start justify-start">
          <div class="flex flex-row justify-between items-center pl-5 w-full h-[10%]">
            <div class="flex flex-row justify-start items-center h-full w-auto">
              <img src="./assets/icons/location-icon.svg" alt="location-icon" class="w-8 h-8 mr-1">
              <span class="font-montserrat text-neutral-600 text-base font-normal">{{currentPost.location}}</span>
            </div>
            <img src="./assets/icons/preferences-icon.svg" alt="preferences-icon" [matMenuTriggerFor]="settings"
              class="w-10 h-10 mr-2 cursor-pointer hover:brightness-150 transition-all ease-in-out duration-75">
            <mat-menu #settings="matMenu" yPosition="below" xPosition="before">
              <ng-template matMenuContent>
                <div mat-menu-item>
                  UKRYJ
                </div>
                <div mat-menu-item>
                  EDYTUJ
                </div>
                <div mat-menu-item>
                  USUÅƒ
                </div>
              </ng-template>
            </mat-menu>
          </div>
          <hr class="h-[1px] border-neutral-800 mx-5">
          <div class="w-full flex flex-col justify-around items-start h-[90%]">
            <div class="h-[80%] w-full">
              <p class="w-full px-7 pt-7 text-neutral-600 text-base font-montserrat text-justify text-pretty">
                {{currentPost.description}}
            </div>
            <div class="w-full h-[20%] flex flex-row items-center justify-start">
              <img src="./assets/icons/heart-icon.png" alt="heart-icon"
                class="w-10 h-10 ml-7 hover:brightness-150 cursor-pointer transition-all ease-in-out duration-75">
              <p *ngIf="!currentPost.hidden_reactions" class="text-neutral-500 text-base font-montserrat ml-3">
                {{currentPost.reactions}}</p>
            </div>
          </div>
        </div>
      </div>
      <div
        class="w-20 h-20 mr-5 hover:scale-110 hover:brightness-150 cursor-pointer transition-all ease-in-out duration-75">
        <img src="./assets/icons/swipe-right.svg" alt="swipe-right" class="h-full w-full" (click)="onSwipeRight()"
          [style]="swipeRightDisabled ? 'visibility: hidden' : 'visibility: visible'">
      </div>
    </div>

    <div
      class="relative flex flex-col justify-start items-center w-full min-h-screen overflow-x-hidden overflow-y-visible">
      <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>
      <div class="w-[85%] flex flex-row justify-start items-center">
        <div (click)="onCreate()"
          class="flex flex-row items-center w-auto h-10 mb-5 mt-20 hover:brightness-125 transition-all ease-in-out duration-150 cursor-pointer">
          <img src="./assets/icons/add-icon.svg" class="h-full w-auto">
          <p class="font-montserrat font-normal text-neutral-500">
            DODAJ
          </p>
        </div>
      </div>
      <div *ngIf="loadedPosts.length >= 1" class="w-[85%] mb-36 h-auto grid grid-cols-3 gap-6">

        <div *ngFor="let post of loadedPosts"
          class="flex flex-col justify-center items-center aspect-w-1 aspect-h-1 cursor-pointer rounded-lg overflow-hidden">
          <img src="{{ post.path }}" alt="gallery-item" (click)="onGalleryItemShow(post.id)"
            class="h-full w-full object-cover rounded-lg hover:scale-110 transition-all ease-in-out duration-500">
        </div>

      </div>
    </div>
  </section>
  <app-footer></app-footer>
</main>
