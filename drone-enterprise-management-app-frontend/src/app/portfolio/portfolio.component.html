<main [ngClass]="onShow || isCreateMode ? 'w-screen h-screen overflow-hidden' : 'w-screen h-screen overflow-x-hidden'">
  <app-navbar></app-navbar>
  <section class="relative h-screen w-full bg-neutral-950 overflow-y-hidden select-none">

    <!-- create overlay -->
    <div *ngIf="isCreateMode"
      class="absolute flex flex-col justify-center items-center z-50 top-0 left-0 h-screen w-screen overflow-hidden">
      <div
        class="relative w-[80%] h-[80%] bg-neutral-900/95 ring-1 ring-neutral-800 rounded-2xl flex flex-col justify-between items-center">
        <img src="./assets/icons/cancel-icon.png" alt="cancel-icon" (click)="onCancelCreateMode()"
          class="absolute right-4 top-4 w-5 h-5 brightness-75 hover:brightness-100 transition-all ease-in-out duration-100 cursor-pointer">
        <div class="w-full h-auto mt-10 px-10">
          <mat-horizontal-stepper
            style="background-color: transparent; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
            <mat-step [stepControl]="postFileForm" label="PLIK">
              <form [formGroup]="postFileForm">
                <div class="font-montserrat flex flex-col justify-start items-start">
                  <p class="text-3xl font-normal text-neutral-600">Wybierz plik foto/video</p>
                  <div (click)="inputFile.click()"
                    class="flex flex-col justify-center items-center h-[300px] mt-2 w-full border-dashed border-2 rounded-xl border-neutral-600 cursor-pointer">
                    <input type="file" #inputFile (change)="onFileSelected($event)" id="file" formControlName="file"
                      class="hidden">
                    <p class="p-5 font-semibold text-base font-montserrat text-neutral-600">
                      WYBIERZ PLIK
                    </p>
                  </div>
                  <div
                    class="flex flex-row justify-between items-center w-full h-[75px] mt-5 text-neutral-600 font-montserrat text-base font-normal">
                    <img [src]="fileSrc" class="h-full w-auto">
                    <p>
                      {{ fileName }}
                    </p>
                    <p>
                      {{ fileSize }}
                    </p>
                  </div>
                  <div class="w-full flex justify-end mt-5">
                    <button matStepperNext>
                      <p
                        [ngClass]="!postFileForm.valid ? 'text-neutral-900 font-semibold text-sm bg-neutral-800 px-7 py-1 rounded-md cursor-not-allowed' : 'text-neutral-900 font-semibold text-sm bg-neutral-600 px-7 py-1 rounded-md hover:bg-neutral-500 ease-in-out transition-all duration-150'">
                        DALEJ
                      </p>
                    </button>
                  </div>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="postLocationForm" label="LOKALIZACJA">
              <form [formGroup]="postLocationForm">
                <div class="font-montserrat flex flex-col justify-start items-start">
                  <p class="text-3xl font-normal text-neutral-600">Dodaj lokalizację</p>
                  <div class="h-[300px] mt-5 w-full">
                    <div class="flex flex-row items-center justify-start">
                      <img src="./assets/icons/location-icon.svg" alt="location-icon" class="w-8 h-8 mr-3">
                      <input type="text" id="location" formControlName="location"
                        class="rounded-sm ring-1 ring-neutral-600 bg-black/15 w-[50%] outline-none px-2 text-neutral-500 text-8">
                    </div>
                  </div>
                  <div class="w-full flex justify-end gap-2">
                    <button matStepperPrevious>
                      <p
                        class="text-neutral-600 font-semibold ring-2 text-sm ring-neutral-600 px-4 py-1 rounded-md hover:text-neutral-500 hover:ring-neutral-500 ease-in-out transition-all duration-150">
                        POWRÓT
                      </p>
                    </button>
                    <button matStepperNext>
                      <p
                        [ngClass]="!postLocationForm.valid ? 'text-neutral-900 font-semibold text-sm bg-neutral-800 px-7 py-1 rounded-md cursor-not-allowed' : 'text-neutral-900 font-semibold text-sm bg-neutral-600 px-7 py-1 rounded-md hover:bg-neutral-500 ease-in-out transition-all duration-150'">
                        DALEJ
                      </p>
                    </button>
                  </div>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="postDescriptionForm" label="OPIS">
              <form [formGroup]="postDescriptionForm">
                <div class="font-montserrat flex flex-col justify-start items-start">
                  <p class="text-3xl font-normal text-neutral-600">Dodaj opis</p>
                  <div class="h-[300px] w-full mt-5">
                    <textarea autocapitalize="true" spellcheck="false" id="description" formControlName="description"
                      class="w-full h-[90%] ring-1 ring-neutral-600 bg-black/15 rounded-md text-neutral-500 text-base outline-none resize-none p-2"></textarea>
                  </div>
                  <div class="w-full flex justify-end gap-2">
                    <button matStepperPrevious>
                      <p
                        class="text-neutral-600 font-semibold ring-2 text-sm ring-neutral-600 px-4 py-1 rounded-md hover:text-neutral-500 hover:ring-neutral-500 ease-in-out transition-all duration-150">
                        POWRÓT
                      </p>
                    </button>
                    <button matStepperNext>
                      <p
                        [ngClass]="!postDescriptionForm.valid ? 'text-neutral-900 font-semibold text-sm bg-neutral-800 px-7 py-1 rounded-md cursor-not-allowed' : 'text-neutral-900 font-semibold text-sm bg-neutral-600 px-7 py-1 rounded-md hover:bg-neutral-500 ease-in-out transition-all duration-150'">
                        DALEJ
                      </p>
                    </button>
                  </div>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="postVisibilityForm" label="WIDOCZNOŚĆ">
              <form [formGroup]="postVisibilityForm">
                <div class="font-montserrat flex flex-col justify-start items-start">
                  <p class="text-3xl font-normal text-neutral-600">Widoczność posta</p>
                  <div class="h-[300px] mt-5">
                    <!-- <input type="checkbox" id="visibility" formControlName="visibility"> -->
                    <mat-slide-toggle formControlName="visibility" id="visibility" checked="true"
                      (change)="onToggleChange()" color="accent">
                    </mat-slide-toggle>
                    <p class="text-sm text-neutral-600 mt-5">
                      {{ !visibilityToggled ? 'Post będzie widoczny publicznie' : 'Post będzie ukryty' }}
                    </p>
                  </div>
                  <div class="w-full flex justify-end gap-2">
                    <button matStepperPrevious>
                      <p
                        class="text-neutral-900 font-semibold text-sm bg-neutral-600 px-7 py-1 rounded-md hover:bg-neutral-500 ease-in-out transition-all duration-150">
                        POWRÓT
                      </p>
                    </button>
                    <button (click)="onPostCreate()">
                      <p
                        class="text-neutral-600 font-semibold ring-2 text-sm ring-neutral-600 px-4 py-1 rounded-md hover:text-neutral-500 hover:ring-neutral-500 ease-in-out transition-all duration-150">
                        PUBLIKUJ
                      </p>
                    </button>
                  </div>
                </div>
              </form>
            </mat-step>
          </mat-horizontal-stepper>
        </div>
      </div>
    </div>

    <!-- default device -->
    <div *ngIf="!isMobile && onShow"
      class="absolute flex flex-row justify-around items-center z-50 top-0 left-0 h-screen w-screen backdrop-blur-sm overflow-hidden">
      <div
        class="relative w-20 h-20 mr-5 hover:scale-110 hover:brightness-150 cursor-pointer transition-all ease-in-out duration-75">
        <img src="./assets/icons/swipe-left.svg" alt="swipe-left" class="h-full w-full" (click)="onSwipeLeft()"
          [style]="swipeLeftDisabled ? 'visibility: hidden' : 'visibility: visible'">
      </div>
      <img src="./assets/icons/cancel-icon.png" alt="cancel-icon" (click)="onGalleryItemClose()"
        class="absolute right-5 top-5 w-8 h-8 brightness-50 cursor-pointer hover:brightness-100 transition-all ease-in-out duration-75">
      <div class="flex flex-row justify-center items-center max-w-[90%] h-[90%]">
        <div class="flex flex-row justify-center items-center bg-neutral-900 h-full max-w-[75%] rounded-l-xl">
          <img src="{{currentPost.path}}" alt="gallery-item" class="w-full h-full object-contain rounded-l-xl">
        </div>
        <div class="bg-neutral-900 h-full max-w-[25%] flex-grow rounded-r-xl flex-col items-start justify-start">
          <div class="flex flex-row justify-between items-center pl-5 w-full h-[10%]">
            <div class="flex flex-row justify-start items-center h-full w-auto">
              <img src="./assets/icons/location-icon.svg" alt="location-icon" class="w-8 h-8 mr-1">
              <span class="font-montserrat text-neutral-600 text-base font-normal">{{currentPost.location}}</span>
            </div>
            <img src="./assets/icons/preferences-icon.svg" alt="preferences-icon" [matMenuTriggerFor]="settings"
              class="w-10 h-10 mr-2 cursor-pointer hover:brightness-150 transition-all ease-in-out duration-75">
            <mat-menu #settings="matMenu" yPosition="below" xPosition="before">
              <ng-template matMenuContent>
                <div mat-menu-item>
                  UKRYJ
                </div>
                <div mat-menu-item>
                  EDYTUJ
                </div>
                <div mat-menu-item>
                  USUŃ
                </div>
              </ng-template>
            </mat-menu>
          </div>
          <hr class="h-[1px] border-neutral-800 mx-5">
          <div class="w-full flex flex-col justify-around items-start h-[90%]">
            <div class="h-[80%] w-full">
              <p class="w-full px-7 pt-7 text-neutral-600 text-base font-montserrat text-justify text-pretty">
                {{currentPost.description}}
            </div>
            <div class="w-full h-[20%] flex flex-row items-center justify-start">
              <img src="./assets/icons/heart-icon.png" alt="heart-icon"
                class="w-10 h-10 ml-7 hover:brightness-150 cursor-pointer transition-all ease-in-out duration-75">
              <p *ngIf="!currentPost.hidden_reactions" class="text-neutral-500 text-base font-montserrat ml-3">
                {{currentPost.reactions}}</p>
            </div>
          </div>
        </div>
      </div>
      <div
        class="w-20 h-20 mr-5 hover:scale-110 hover:brightness-150 cursor-pointer transition-all ease-in-out duration-75">
        <img src="./assets/icons/swipe-right.svg" alt="swipe-right" class="h-full w-full" (click)="onSwipeRight()"
          [style]="swipeRightDisabled ? 'visibility: hidden' : 'visibility: visible'">
      </div>
    </div>

    <div
      class="relative flex flex-col justify-start items-center w-full min-h-screen overflow-x-hidden overflow-y-visible">
      <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>
      <div class="w-[85%] flex flex-row justify-start items-center">
        <div (click)="onCreate()"
          class="flex flex-row items-center w-auto h-10 mb-5 mt-20 hover:brightness-125 transition-all ease-in-out duration-150 cursor-pointer">
          <img src="./assets/icons/add-icon.svg" class="h-full w-auto">
          <p class="font-montserrat font-normal text-neutral-500">
            DODAJ
          </p>
        </div>
      </div>
      <div *ngIf="loadedPosts.length >= 1" class="w-[85%] mb-36 h-auto grid grid-cols-3 gap-6">

        <div *ngFor="let post of loadedPosts"
          class="flex flex-col justify-center items-center aspect-w-1 aspect-h-1 cursor-pointer rounded-lg overflow-hidden">
          <img src="{{ post.path }}" alt="gallery-item" (click)="onGalleryItemShow(post.id)"
            class="h-full w-full object-cover rounded-lg hover:scale-110 transition-all ease-in-out duration-500">
        </div>

      </div>
    </div>
  </section>
  <app-footer></app-footer>
</main>









<!-- <div class="w-full h-auto flex flex-row justify-center items-center my-5">
            <p (click)="onCancelCreateMode()"
              class="w-[40%] py-2 mx-2 ring-1 ring-neutral-600 font-montserrat font-normal text-base text-neutral-600 rounded-lg text-center cursor-pointer hover:ring-neutral-500 hover:text-neutral-500 transition-all ease-in-out duration-150">
              ANULUJ
            </p>
            <button type="submit" class="w-[40%]">
              <p
                class="w-full py-2 mx-2 font-montserrat font-normal text-base bg-neutral-600 text-neutral-950 rounded-lg text-center cursor-pointer hover:bg-neutral-500 transition-all ease-in-out duration-150">
                DODAJ
              </p>
            </button>
          </div> -->
